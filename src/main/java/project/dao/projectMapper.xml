<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 
 <mapper namespace="projectSQL">
 
 	<select id="getAdminpage1" parameterType="java.util.Map" resultType="project.bean.projectDTO">
		<![CDATA[
			select * from
			(select rownum rn, tt.* from
			(select * from project where field=#{field} and recruit_state='ing') tt
			)where rn>=#{startNum} and rn<=#{endNum}
		]]>
	</select>
		
	<select id="getAdminpage2" parameterType="java.util.Map" resultType="project.bean.projectDTO">
		<![CDATA[
			select * from
			(select rownum rn, tt.* from
			(select * from project where field=#{field}) tt
			)where rn>=#{startNum} and rn<=#{endNum}
		]]>
	</select>
	
	<select id="getChosenTech" resultType="java.lang.String">
		SELECT chosen_tech
		FROM Project_Tech_Stack 
		UNPIVOT INCLUDE NULLS (
		  chosen FOR chosen_tech IN (
		  figma, photoshop, ios, android, react, vue, flutter,
		  html_css, javascript, spring, java, Kotlin, node_js, 
		  MongoDB, C_C#, Git, AWS, Docker, kubernetes, tensorflow,
		  unity, python, MySql, TypeScript
		  )
		)WHERE chosen = 'y' and project_id=#{projectId};
	</select>
	
	<!-- 총글수 -->
	<select id="getTotalA" resultType="int">
		select count(*) from project
	</select>
	
	<delete id="deleteProject" parameterType="int">
		delete from project where id=#{projectId}
	</delete>
	
	<select id="getUserList" resultType="user.bean.userDTO">
		select * from user_table;
	</select>

	
 </mapper>
 
 